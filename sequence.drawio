<mxfile host="94d71195-871a-4c30-8e5d-654f519e474d" modified="2020-08-20T01:44:03.377Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.48.0 Chrome/78.0.3904.130 Electron/7.3.2 Safari/537.36" etag="F_iLX3LF9E0-kADBwOrb" version="13.1.3">
    <diagram id="6hGFLwfOUW9BJ-s0fimq" name="Page-1">
        <mxGraphModel dx="390" dy="328" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="3" value="&lt;div style=&quot;color: rgb(212 , 212 , 212) ; background-color: rgb(30 , 30 , 30) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-weight: normal ; font-size: 12px ; line-height: 18px&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4&quot;&gt;QuicServer&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
                    <mxGeometry x="490" y="10" width="1881.5" height="1820" as="geometry"/>
                </mxCell>
                <mxCell id="170" value="&lt;span style=&quot;color: rgba(0 , 0 , 0 , 0) ; font-family: monospace ; font-size: 0px&quot;&gt;%3CmxGraphModel%3E%3Croot%3E%3CmxCell%20id%3D%220%22%2F%3E%3CmxCell%20id%3D%221%22%20parent%3D%220%22%2F%3E%3CmxCell%20id%3D%222%22%20value%3D%22%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%20rgb(78%2C%20201%2C%20176)%3B%20font-size%3A%2012px%3B%26quot%3B%26gt%3BQuicServer%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%20rgb(212%2C%20212%2C%20212)%3B%20font-size%3A%2012px%3B%26quot%3B%26gt%3B%23%26lt%3B%2Fspan%26gt%3B%26lt%3Bfont%20style%3D%26quot%3Bcolor%3A%20rgb(220%2C%20220%2C%20170)%3B%20font-size%3A%2012px%3B%26quot%3B%26gt%3Bdatagram_received()%26lt%3B%2Ffont%26gt%3B%22%20style%3D%22text%3Bhtml%3D1%3Balign%3Dleft%3BverticalAlign%3Dmiddle%3Bresizable%3D0%3Bpoints%3D%5B%5D%3Bautosize%3D1%3BfontSize%3D12%3BfontFamily%3DHelvetica%3BfontColor%3D%23F0F0F0%3B%22%20vertex%3D%221%22%20parent%3D%221%22%3E%3CmxGeometry%20x%3D%221840%22%20y%3D%22250%22%20width%3D%22190%22%20height%3D%2220%22%20as%3D%22geometry%22%2F%3E%3C%2FmxCell%3E%3C%2Froot%3E%3C%2FmxGraphModel%3E&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;" parent="3" vertex="1">
                    <mxGeometry x="1378" y="1145" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="171" value="&lt;span style=&quot;color: rgb(78, 201, 176);&quot;&gt;QuicServer&lt;/span&gt;&lt;span style=&quot;color: rgb(212, 212, 212);&quot;&gt;#&lt;/span&gt;&lt;font style=&quot;color: rgb(220, 220, 170);&quot;&gt;datagram_received()&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;" parent="3" vertex="1">
                    <mxGeometry x="1350" y="1145" width="190" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="172" value="&lt;span style=&quot;color: rgb(255 , 255 , 255) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 12px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(42 , 42 , 42) ; float: none ; display: inline&quot;&gt;quic_transport_server#&lt;/span&gt;&lt;span style=&quot;font-size: 12px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; color: rgb(78 , 201 , 176) ; background-color: rgb(30 , 30 , 30) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;QuicTransportProtocol#&lt;/span&gt;&lt;span style=&quot;font-size: 12px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; color: rgb(220 , 220 , 170) ; background-color: rgb(30 , 30 , 30) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;datagram_received()&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;" parent="3" vertex="1">
                    <mxGeometry x="1390" y="1170" width="430" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="169" value="quic_transport_server#&lt;span style=&quot;color: rgb(78 , 201 , 176) ; background-color: rgb(30 , 30 , 30) ; font-family: &amp;quot;menlo&amp;quot; , &amp;quot;monaco&amp;quot; , &amp;quot;courier new&amp;quot; , monospace&quot;&gt;QuicTransportProtocol#&lt;/span&gt;&lt;span style=&quot;color: rgb(220 , 220 , 170) ; background-color: rgb(30 , 30 , 30) ; font-family: &amp;quot;menlo&amp;quot; , &amp;quot;monaco&amp;quot; , &amp;quot;courier new&amp;quot; , monospace&quot;&gt;quic_event_received&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;" parent="3" vertex="1">
                    <mxGeometry x="1430" y="1189" width="430" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="176" value="&lt;div style=&quot;color: rgb(212, 212, 212); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; line-height: 18px;&quot;&gt;&lt;span style=&quot;color: #c586c0&quot;&gt;while&lt;/span&gt; event &lt;span style=&quot;color: #569cd6&quot;&gt;is&lt;/span&gt; &lt;span style=&quot;color: #569cd6&quot;&gt;not&lt;/span&gt; &lt;span style=&quot;color: #569cd6&quot;&gt;None&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="3" vertex="1">
                    <mxGeometry x="1588" y="1755" width="180" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="162" value="&lt;span style=&quot;color: rgb(78, 201, 176); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; background-color: rgb(30, 30, 30);&quot;&gt;QuicConnection.&lt;/span&gt;&lt;span style=&quot;font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; background-color: rgb(30, 30, 30);&quot;&gt;&lt;font color=&quot;#ffe599&quot;&gt;next_event&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(78, 201, 176); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; background-color: rgb(30, 30, 30);&quot;&gt;()&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;" parent="3" vertex="1">
                    <mxGeometry x="1629.5" y="1775" width="210" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="2" value="Client" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
                    <mxGeometry x="150" y="80" width="100" height="2150" as="geometry"/>
                </mxCell>
                <mxCell id="108" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Helvetica;fontSize=28;fontColor=#FF6666;" parent="1" source="27" target="3" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="115" y="240"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="27" value="&lt;div style=&quot;color: rgb(212 , 212 , 212) ; background-color: rgb(30 , 30 , 30) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 18px&quot;&gt;&lt;span style=&quot;color: #569cd6&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;color: #4ec9b0&quot;&gt;QuicTransport&lt;/span&gt;(&lt;span style=&quot;color: #9cdcfe&quot;&gt;url&lt;/span&gt;)&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
                    <mxGeometry x="30" y="230" width="170" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="52" value="&lt;font style=&quot;font-size: 27px&quot;&gt;Client Indication&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
                    <mxGeometry x="353" y="1185" width="210" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="53" value="(stream(client開始かつ単方向)で送信される。=&amp;gt; stream_idは2)" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
                    <mxGeometry x="283" y="1220" width="350" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="64" value="ConnectionIdIssued(connection_id = b'hogehoge')" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
                    <mxGeometry x="283" y="1645" width="280" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="65" value="ここで新しいConnectionIdが発行されるのは謎。&lt;br&gt;send_datagrameなどではこの前まで使われていたConnection&lt;br&gt;を使用してデータを送信している。" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
                    <mxGeometry x="247" y="1689" width="350" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="67" value="class&amp;nbsp;&lt;span style=&quot;color: rgb(78 , 201 , 176) ; background-color: rgb(30 , 30 , 30) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;QuicConnectionProtocol&lt;/span&gt;&lt;br&gt;は、.quicにclass QuicConnectionを与えている。&lt;br&gt;このclass QuicConnectionは&lt;span style=&quot;background-color: rgb(30 , 30 , 30) ; color: rgb(212 , 212 , 212) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;_host_cids&lt;/span&gt;&lt;span&gt;をもつ&lt;br&gt;&lt;/span&gt;この_host_cidsはにこの段階で二つのhost_cidが付けられる。ここが意味不明。&lt;br&gt;データの送信などは一つ目のhost_cidが使われてる雰囲気。&lt;br&gt;新しくConnectionIdを発行する、QuicConnection#_replenish_connection_idsが、&lt;br&gt;QuicConnection#_handle_crypto_frameと、&lt;br&gt;QuicConnection#_handle_retire_connection_id_frame&lt;br&gt;で呼び出されているよう。&lt;br&gt;&lt;br&gt;=&amp;gt; 作られるのは&lt;span style=&quot;color: rgb(232 , 145 , 45) ; font-family: &amp;#34;monaco&amp;#34; , &amp;#34;menlo&amp;#34; , &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; text-align: left ; background-color: rgba(232 , 232 , 232 , 0.04)&quot;&gt;ProcolNegotiated&lt;/span&gt;&lt;br&gt;のタイミングだった。&lt;span style=&quot;color: rgb(232 , 145 , 45) ; font-family: &amp;#34;monaco&amp;#34; , &amp;#34;menlo&amp;#34; , &amp;#34;consolas&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; text-align: left ; background-color: rgba(232 , 232 , 232 , 0.04)&quot;&gt;_remote_active_connection_id_limit&lt;/span&gt;&lt;br&gt;制限まで作っておくみたい。" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
                    <mxGeometry x="209" y="1755" width="450" height="180" as="geometry"/>
                </mxCell>
                <mxCell id="100" value="&lt;span style=&quot;color: rgb(78 , 201 , 176) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;QuicConnection#&lt;/span&gt;&lt;span style=&quot;color: rgb(220 , 220 , 170) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;receive_datagram()&lt;/span&gt;&lt;span style=&quot;color: rgb(220 , 220 , 170) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;&lt;br&gt;&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#F0F0F0;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="1959" y="605" width="250" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="79" value="&lt;span style=&quot;color: rgb(78 , 201 , 176) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;QuicConnection#&lt;/span&gt;&lt;span style=&quot;color: rgb(220 , 220 , 170) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;receive_datagram()&lt;/span&gt;&lt;span style=&quot;color: rgb(220 , 220 , 170) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;&lt;br&gt;&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#F0F0F0;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="1960" y="1219" width="250" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="107" value="&lt;font face=&quot;arial, sans-serif&quot; style=&quot;font-size: 40px;&quot;&gt;&lt;span style=&quot;font-weight: 400; font-size: 40px;&quot;&gt;ProtocolNegotiated&lt;/span&gt;&lt;/font&gt;" style="shape=partialRectangle;whiteSpace=wrap;html=1;bottom=1;right=1;left=1;top=0;fillColor=#D5E8D4;routingCenterX=-0.5;labelBackgroundColor=none;strokeWidth=1;fontFamily=Helvetica;fontSize=40;fontColor=#FF6666;align=left;rotation=90;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="641.39" y="633" width="870.61" height="99.44" as="geometry"/>
                </mxCell>
                <mxCell id="127" value="&lt;font face=&quot;arial, sans-serif&quot;&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;HandShakeCompleted&lt;br&gt;&lt;/span&gt;&lt;/font&gt;" style="shape=partialRectangle;whiteSpace=wrap;html=1;bottom=1;right=1;left=1;top=0;fillColor=#D5E8D4;routingCenterX=-0.5;labelBackgroundColor=none;strokeWidth=1;fontFamily=Helvetica;fontSize=40;fontColor=#FF6666;align=left;rotation=90;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="740.02" y="1454.94" width="673.36" height="99.44" as="geometry"/>
                </mxCell>
                <mxCell id="136" value="TLSで送る内容がStreamDataとして送られてくる&lt;br&gt;それをself.tls.handle_messageに渡して処理させる。&lt;br&gt;そして&lt;span style=&quot;background-color: rgb(30 , 30 , 30) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;_push_crypto_data（）でデータを格納する&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="2233" y="1434" width="310" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="133" value="&lt;div style=&quot;font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; color: rgb(212, 212, 212);&quot;&gt;&lt;span style=&quot;color: rgb(86 , 156 , 214)&quot;&gt;self&lt;/span&gt;._process_events()&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
                    <mxGeometry x="2039" y="1737" width="170" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="137" value="&lt;div style=&quot;font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 18px&quot;&gt;&lt;font color=&quot;#3399ff&quot;&gt;self&lt;/font&gt;&lt;span style=&quot;color: rgb(212 , 212 , 212)&quot;&gt;._payload_received()&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
                    <mxGeometry x="2158" y="1518" width="190" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="138" value="&lt;div style=&quot;font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; line-height: 18px;&quot;&gt;&lt;font color=&quot;#3399ff&quot;&gt;self&lt;/font&gt;&lt;span style=&quot;color: rgb(212 , 212 , 212)&quot;&gt;._handle_stream_frame()&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2198" y="1578" width="210" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="139" value="&amp;nbsp;frame_type: 9 を受け取る(self._handle_stream_frame)" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
                    <mxGeometry x="2198" y="1558" width="310" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="140" value="&lt;div style=&quot;color: rgb(212, 212, 212); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; line-height: 18px;&quot;&gt;stream = &lt;span style=&quot;color: #569cd6&quot;&gt;self&lt;/span&gt;._get_or_create_stream(frame_type, stream_id)&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2238" y="1598" width="430" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="141" value="&lt;div style=&quot;font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; line-height: 18px; color: rgb(212, 212, 212);&quot;&gt;&lt;span style=&quot;color: rgb(86 , 156 , 214)&quot;&gt;self&lt;/span&gt;&lt;span&gt;._events.append(event)&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 18px;&quot;&gt;&lt;font color=&quot;#d4d4d4&quot; face=&quot;menlo, monaco, courier new, monospace&quot;&gt;StreamDataReceivedが&lt;/font&gt;&lt;font face=&quot;menlo, monaco, courier new, monospace&quot; color=&quot;#00cc66&quot;&gt;QuicConnection&lt;/font&gt;&lt;font color=&quot;#d4d4d4&quot; face=&quot;menlo, monaco, courier new, monospace&quot;&gt;の_eventsに格納される&lt;/font&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2240" y="1635" width="390" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="144" value="おそらくclientのpath/originなどが送られてきている？" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
                    <mxGeometry x="2198" y="1538" width="300" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="145" value="QuicConnection#eventsの中には&lt;br&gt;HandShakeCompleted&lt;br&gt;StreamDataReceived&amp;nbsp;&lt;br&gt;の二つが入った状態" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
                    <mxGeometry x="2039" y="1678" width="190" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="150" value="" style="endArrow=classic;html=1;strokeWidth=2;fontSize=27;" parent="1" source="2" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="659" y="1150" as="sourcePoint"/>
                        <mxPoint x="1180" y="1175" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="152" value="TLS ACK" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=27;" parent="1" vertex="1">
                    <mxGeometry x="381" y="1131" width="130" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="157" value="&lt;span style=&quot;color: rgb(240, 240, 240); font-size: 35px;&quot;&gt;Client Indication&lt;br style=&quot;font-size: 35px;&quot;&gt;&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=35;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="1139" y="2045" width="260" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="93" value="protocol.datagram_received(data,addr)" style="text;html=1;align=left;verticalAlign=bottom;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="1868" y="520" width="220" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="81" value="&lt;span style=&quot;color: rgb(220 , 220 , 170) ; background-color: rgb(30 , 30 , 30) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;serve&lt;/span&gt;()" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#F0F0F0;" parent="1" vertex="1">
                    <mxGeometry x="1840" y="70" width="60" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="82" value="&lt;div style=&quot;color: rgb(212 , 212 , 212) ; font-family: &amp;quot;menlo&amp;quot; , &amp;quot;monaco&amp;quot; , &amp;quot;courier new&amp;quot; , monospace ; line-height: 18px&quot;&gt;&lt;span style=&quot;color: #c586c0&quot;&gt;await&lt;/span&gt; loop.create_datagram_endpoint(QuicServer)&lt;/div&gt;&lt;div style=&quot;color: rgb(212 , 212 , 212) ; font-family: &amp;quot;menlo&amp;quot; , &amp;quot;monaco&amp;quot; , &amp;quot;courier new&amp;quot; , monospace ; line-height: 18px&quot;&gt;&lt;span style=&quot;color: rgb(240, 240, 240); font-family: helvetica;&quot;&gt;create_datagram_endpointなのはQuicがUDP上で動くから。&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(212 , 212 , 212) ; font-family: &amp;quot;menlo&amp;quot; , &amp;quot;monaco&amp;quot; , &amp;quot;courier new&amp;quot; , monospace ; line-height: 18px&quot;&gt;&lt;span style=&quot;color: rgb(240, 240, 240); font-family: helvetica;&quot;&gt;データ受け取った時にはdatagram_received()が走る&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#F0F0F0;labelBackgroundColor=none;spacing=2;spacingLeft=0;" parent="1" vertex="1">
                    <mxGeometry x="1880" y="90" width="360" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="83" value="これによってQuicServerが起動する。&lt;br&gt;datagramを受け取った際には&lt;br&gt;&lt;span style=&quot;color: rgb(78, 201, 176);&quot;&gt;QuicServer&lt;/span&gt;&lt;span style=&quot;color: rgb(212, 212, 212);&quot;&gt;#&lt;/span&gt;&lt;font style=&quot;color: rgb(220 , 220 , 170)&quot;&gt;datagram_received()&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#d4e1f5&quot;&gt;に受け渡される&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#F0F0F0;labelBackgroundColor=none;fontFamily=Helvetica;" parent="1" vertex="1">
                    <mxGeometry x="1840" y="170" width="230" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="86" value="&lt;span style=&quot;color: rgb(78, 201, 176); font-size: 12px;&quot;&gt;QuicServer&lt;/span&gt;&lt;span style=&quot;color: rgb(212, 212, 212); font-size: 12px;&quot;&gt;#&lt;/span&gt;&lt;font style=&quot;color: rgb(220, 220, 170); font-size: 12px;&quot;&gt;datagram_received()&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#F0F0F0;" parent="1" vertex="1">
                    <mxGeometry x="1840" y="250" width="190" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="87" value="version negotiationのためにquic_versionを&lt;br&gt;&lt;span style=&quot;color: rgb(86, 156, 214);&quot;&gt;self&lt;/span&gt;&lt;span style=&quot;color: rgb(212, 212, 212);&quot;&gt;._transport.sendto()&lt;/span&gt;で送信する" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#F0F0F0;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="1868" y="270" width="250" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="88" value="&lt;div style=&quot;line-height: 18px;&quot;&gt;connection = QuicConnection()&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="1868" y="320" width="220" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="89" value="protocol = self._create_protocol(connection,stream_hander=self.stream_handler)" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#F0F0F0;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="1909" y="400" width="450" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="90" value="&lt;div style=&quot;line-height: 100%; font-size: 12px;&quot;&gt;&lt;div style=&quot;color: rgb(212, 212, 212); line-height: 18px; font-size: 12px;&quot;&gt;&lt;span style=&quot;color: rgb(255, 255, 255); font-size: 12px;&quot;&gt;上で定義したQuicConnectionを、&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(212, 212, 212); line-height: 18px; font-size: 12px;&quot;&gt;&lt;span style=&quot;color: rgb(86, 156, 214); font-size: 12px;&quot;&gt;c&lt;/span&gt;&lt;span style=&quot;color: rgb(86, 156, 214); font-size: 12px;&quot;&gt;lass&lt;/span&gt;&lt;span style=&quot;font-size: 12px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(78, 201, 176); font-size: 12px;&quot;&gt;QuicConnectionProtocol&lt;/span&gt;&lt;span style=&quot;color: rgb(255, 255, 255); font-size: 12px;&quot;&gt;に渡して初期化&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;labelBackgroundColor=none;strokeWidth=1;horizontal=1;fontStyle=0" parent="1" vertex="1">
                    <mxGeometry x="1949" y="420" width="260" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="91" value="protocol.connection_made(self._transport)&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;self._transportの中身はasyncio.DatagramTransport&lt;br&gt;　　　&lt;span style=&quot;color: rgb(255 , 255 , 255)&quot;&gt;asyncio.DatagramTransport型を&lt;/span&gt;&lt;span style=&quot;color: rgb(255 , 255 , 255) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;asyncio.BaseTransportにcastする&lt;/span&gt;" style="text;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;labelBackgroundColor=none;labelBorderColor=none;html=1;" parent="1" vertex="1">
                    <mxGeometry x="1909" y="455" width="440" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="94" value="protocolの中身は&lt;span style=&quot;&quot;&gt;class&lt;/span&gt;&lt;span style=&quot;background-color: rgb(30, 30, 30);&quot;&gt; &lt;/span&gt;&lt;span style=&quot;&quot;&gt;QuicConnectionProtocol&lt;/span&gt;&lt;span style=&quot;background-color: rgb(30, 30, 30);&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;&quot;&gt;asyncio&lt;/span&gt;&lt;span style=&quot;background-color: rgb(30, 30, 30);&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;&quot;&gt;DatagramProtocol&lt;/span&gt;&lt;span style=&quot;background-color: rgb(30, 30, 30);&quot;&gt;)&lt;br&gt;なので、QuicConnectionProtocol#datagram_received()が動く&lt;br&gt;&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="1898" y="540" width="410" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="96" value="&lt;div style=&quot;color: rgb(212 , 212 , 212) ; line-height: 18px&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #569cd6&quot;&gt;self&lt;/span&gt;._quic.receive_datagram(cast(&lt;span style=&quot;color: #4ec9b0&quot;&gt;bytes&lt;/span&gt;, data), addr, &lt;span style=&quot;color: #9cdcfe&quot;&gt;now&lt;/span&gt;=&lt;span style=&quot;color: #569cd6&quot;&gt;self&lt;/span&gt;._loop.time())&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="1939" y="585" width="410" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="99" value="&lt;div style=&quot;color: rgb(212 , 212 , 212)&quot;&gt;&lt;span style=&quot;color: rgb(86 , 156 , 214)&quot;&gt;self&lt;/span&gt;._process_events()&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="1949" y="960" width="140" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="103" value="&lt;span style=&quot;color: rgb(86, 156, 214);&quot;&gt;self&lt;/span&gt;&lt;span style=&quot;color: rgb(212, 212, 212);&quot;&gt;.transmit()&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="1949" y="1110" width="90" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="104" value="Protocolはまだこの段階ではないので、作成する必要がある。&lt;br&gt;作られている場合はすぐにprotocol.datagram_received(data,addr)に飛ぶ" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="1870" y="360" width="400" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="105" value="&lt;div style=&quot;color: rgb(212, 212, 212); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; line-height: 18px;&quot;&gt;ConnectionIdIssued&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(212, 212, 212); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; line-height: 18px;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;menlo&amp;quot; , &amp;quot;monaco&amp;quot; , &amp;quot;courier new&amp;quot; , monospace&quot;&gt;ConnectionIdRetired&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(212, 212, 212); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; line-height: 18px;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;menlo&amp;quot; , &amp;quot;monaco&amp;quot; , &amp;quot;courier new&amp;quot; , monospace&quot;&gt;ConnectionTerminated&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(212, 212, 212); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; line-height: 18px;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;menlo&amp;quot; , &amp;quot;monaco&amp;quot; , &amp;quot;courier new&amp;quot; , monospace&quot;&gt;HandshakeCompleted&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(212, 212, 212); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; line-height: 18px;&quot;&gt;&lt;div style=&quot;font-family: &amp;quot;menlo&amp;quot; , &amp;quot;monaco&amp;quot; , &amp;quot;courier new&amp;quot; , monospace ; line-height: 18px&quot;&gt;PingAcknowledged&lt;/div&gt;&lt;div style=&quot;font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; line-height: 18px;&quot;&gt;など、eventのタイプによって処理が分岐する&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="1988" y="980" width="270" height="110" as="geometry"/>
                </mxCell>
                <mxCell id="106" value="今回はProtocolNegotiatedイベントであり、特に処理は行われない" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="1988" y="1090" width="370" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="109" value="&lt;span style=&quot;color: rgb(78, 201, 176); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace;&quot;&gt;QuicConnection#&lt;/span&gt;&lt;span style=&quot;color: rgb(220, 220, 170); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace;&quot;&gt;_alpn_handler()&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2110" y="720" width="230" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="110" value="&lt;span style=&quot;color: rgb(78, 201, 176); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace;&quot;&gt;QuicConnection#&lt;/span&gt;&lt;span style=&quot;color: rgb(220, 220, 170); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace;&quot;&gt;_initialize()&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2075" y="680" width="220" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="112" value="プロトコルバージョンをチェックして問題なければ&lt;br&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(78 , 201 , 176) ; font-family: &amp;quot;menlo&amp;quot; , &amp;quot;monaco&amp;quot; , &amp;quot;courier new&amp;quot; , monospace&quot;&gt;QuicConnection#&lt;/span&gt;&lt;span style=&quot;color: rgb(220, 220, 170); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace;&quot;&gt;connect()&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="2030" y="630" width="290" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="115" value="&lt;font color=&quot;#66b2ff&quot;&gt;self&lt;/font&gt;._initialize()" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="2070" y="660" width="90" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="117" value="ProtocolNegotiatedがeventに格納される" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2150" y="740" width="230" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="118" value="&lt;font color=&quot;#66b2ff&quot;&gt;self&lt;/font&gt;._payload_received()&lt;br&gt;payloadの処理を行う。" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="2028" y="760" width="150" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="122" value="この段階では6が受け取られる&lt;font color=&quot;#66b2ff&quot;&gt;。&lt;br&gt;self&lt;/font&gt;._handle_crypto_frame()" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="2070" y="850" width="190" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="123" value="TLS周りが初期化される" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="2110" y="700" width="150" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="125" value="ここでnegotiatedになる" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="2064" y="930" width="140" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="128" value="frame_typeが定義されており、それに紐づいた処理がされる。&lt;br&gt;0: 空&lt;br&gt;2: ack&lt;br&gt;6: handle crypto frameなど" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
                    <mxGeometry x="2069" y="790" width="350" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="124" value="TLSで送る内容がStreamDataとして送られてくる&lt;br&gt;それをself.tls.handle_messageに渡して処理させる。&lt;br&gt;そして&lt;span style=&quot;background-color: rgb(30 , 30 , 30) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;_push_crypto_data（）でデータを格納する&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="2109" y="880" width="310" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="129" value="Protocol Negotiatedの時に作ったものを使うので特に処理はなく、&lt;br&gt;L150で　protocol.datagram_received(data,addr) をよぶ" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
                    <mxGeometry x="1980" y="1240" width="370" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="130" value="&lt;div style=&quot;font-family: &amp;quot;menlo&amp;quot; , &amp;quot;monaco&amp;quot; , &amp;quot;courier new&amp;quot; , monospace ; line-height: 18px&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(78, 201, 176); background-color: rgb(30, 30, 30); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace;&quot;&gt;QuicConnectionProtocol#&lt;/span&gt;&lt;span style=&quot;color: rgb(220 , 220 , 170) ; background-color: rgb(30 , 30 , 30) ; font-family: &amp;quot;menlo&amp;quot; , &amp;quot;monaco&amp;quot; , &amp;quot;courier new&amp;quot; , monospace&quot;&gt;datagram_received()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2000" y="1288" width="320" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="131" value="&lt;div style=&quot;font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; color: rgb(212 , 212 , 212)&quot;&gt;&lt;span style=&quot;color: rgb(86 , 156 , 214)&quot;&gt;self&lt;/span&gt;._quic.receive_datagram(cast(&lt;span style=&quot;color: rgb(78 , 201 , 176)&quot;&gt;bytes&lt;/span&gt;, data), addr,&amp;nbsp;&lt;span style=&quot;color: rgb(156 , 220 , 254)&quot;&gt;now&lt;/span&gt;=&lt;span style=&quot;color: rgb(86 , 156 , 214)&quot;&gt;self&lt;/span&gt;._loop.time())&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
                    <mxGeometry x="2039" y="1308" width="560" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="132" value="&lt;div style=&quot;font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 18px&quot;&gt;&lt;div style=&quot;color: rgb(212 , 212 , 212) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 18px&quot;&gt;&lt;span style=&quot;color: #4ec9b0&quot;&gt;QuicConnection#&lt;/span&gt;&lt;span style=&quot;color: rgb(220 , 220 , 170) ; background-color: rgb(30 , 30 , 30) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;receive_datagram&lt;/span&gt;&lt;span style=&quot;color: rgb(220 , 220 , 170)&quot;&gt;()&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2084" y="1328" width="250" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="134" value="frame_type: 2を受け取る(ACK)&lt;br&gt;frame_type: 6を受け取る(handle_crypt_frame)" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
                    <mxGeometry x="2192" y="1388" width="260" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="135" value="&lt;font color=&quot;#66b2ff&quot; style=&quot;&quot;&gt;self&lt;/font&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;._handle_crypto_frame()&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
                    <mxGeometry x="2192" y="1418" width="160" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="143" value="&lt;span style=&quot;font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; color: rgb(86 , 156 , 214)&quot;&gt;self&lt;/span&gt;&lt;span style=&quot;color: rgb(212 , 212 , 212) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;._events.append(event)&lt;/span&gt;&lt;br&gt;HandShakeCompleted が&lt;span style=&quot;color: rgb(78 , 201 , 176) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; background-color: rgb(30 , 30 , 30)&quot;&gt;QuicConnection&lt;/span&gt;のeventsに格納される" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
                    <mxGeometry x="2233" y="1484" width="370" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="156" value="&lt;span style=&quot;color: rgb(240, 240, 240); font-size: 12px;&quot;&gt;HandShakeCompleted イベント&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#000000;horizontal=1;" parent="1" vertex="1">
                    <mxGeometry x="2150.5" y="1804" width="190" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="158" value="TLSの接続確立を待ってくれるwaiterを消す" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="2192.5" y="1824" width="250" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="160" value="&lt;span style=&quot;color: rgb(78, 201, 176); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace;&quot;&gt;QuicTransportProtocol&lt;/span&gt;&lt;span style=&quot;&quot;&gt;#&lt;/span&gt;&lt;span style=&quot;color: rgb(220, 220, 170); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace;&quot;&gt;quic_event_received() &amp;lt;- quic_transport_server.pyでoverrideしてる&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2158" y="1852" width="630" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="161" value="&lt;font color=&quot;#3399ff&quot; style=&quot;font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace;&quot;&gt;self&lt;/font&gt;&lt;span style=&quot;font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; color: rgb(212, 212, 212);&quot;&gt;._payload_received()&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="2152" y="1368" width="190" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="163" value="&lt;span style=&quot;font-family: &amp;quot;menlo&amp;quot; , &amp;quot;monaco&amp;quot; , &amp;quot;courier new&amp;quot; , monospace ; color: rgb(197 , 134 , 192)&quot;&gt;while&lt;/span&gt;&lt;span style=&quot;color: rgb(212, 212, 212); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;menlo&amp;quot; , &amp;quot;monaco&amp;quot; , &amp;quot;courier new&amp;quot; , monospace ; color: rgb(86 , 156 , 214)&quot;&gt;not&lt;/span&gt;&lt;span style=&quot;color: rgb(212, 212, 212); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace;&quot;&gt; buf.eof()&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2119" y="1348" width="150" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="174" value="HandShakeCompleteの場合は特に何も処理せず、&lt;br&gt;pending_eventsにHandShakeCompletedを格納する" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2198" y="1872" width="290" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="178" value="&lt;span style=&quot;color: rgba(0 , 0 , 0 , 0) ; font-family: monospace ; font-size: 0px&quot;&gt;%3CmxGraphModel%3E%3Croot%3E%3CmxCell%20id%3D%220%22%2F%3E%3CmxCell%20id%3D%221%22%20parent%3D%220%22%2F%3E%3CmxCell%20id%3D%222%22%20value%3D%22%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%20rgb(78%2C%20201%2C%20176)%3B%20font-family%3A%20menlo%2C%20monaco%2C%20%26amp%3Bquot%3Bcourier%20new%26amp%3Bquot%3B%2C%20monospace%3B%20background-color%3A%20rgb(30%2C%2030%2C%2030)%3B%26quot%3B%26gt%3BQuicConnection.%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bfont-family%3A%20menlo%2C%20monaco%2C%20%26amp%3Bquot%3Bcourier%20new%26amp%3Bquot%3B%2C%20monospace%3B%20background-color%3A%20rgb(30%2C%2030%2C%2030)%3B%26quot%3B%26gt%3B%26lt%3Bfont%20color%3D%26quot%3B%23ffe599%26quot%3B%26gt%3Bnext_event%26lt%3B%2Ffont%26gt%3B%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%20rgb(78%2C%20201%2C%20176)%3B%20font-family%3A%20menlo%2C%20monaco%2C%20%26amp%3Bquot%3Bcourier%20new%26amp%3Bquot%3B%2C%20monospace%3B%20background-color%3A%20rgb(30%2C%2030%2C%2030)%3B%26quot%3B%26gt%3B()%26lt%3B%2Fspan%26gt%3B%22%20style%3D%22text%3Bhtml%3D1%3Balign%3Dleft%3BverticalAlign%3Dmiddle%3Bresizable%3D0%3Bpoints%3D%5B%5D%3Bautosize%3D1%3BfontSize%3D12%3BfontColor%3D%23FFFFFF%3B%22%20vertex%3D%221%22%20parent%3D%221%22%3E%3CmxGeometry%20x%3D%222161.5%22%20y%3D%221785%22%20width%3D%22210%22%20height%3D%2220%22%20as%3D%22geometry%22%2F%3E%3C%2FmxCell%3E%3C%2Froot%3E%3C%2FmxGraphModel%3E&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="2139" y="1923" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="179" value="&lt;span style=&quot;color: rgb(78, 201, 176); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; background-color: rgb(30, 30, 30);&quot;&gt;QuicConnection.&lt;/span&gt;&lt;span style=&quot;font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; background-color: rgb(30, 30, 30);&quot;&gt;&lt;font color=&quot;#ffe599&quot;&gt;next_event&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(78, 201, 176); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; background-color: rgb(30, 30, 30);&quot;&gt;()&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="2114" y="1923" width="210" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="180" value="StreamDataReceivedイベント&lt;br&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="2159.5" y="1943" width="180" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="181" value="特に何もしない" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="2199.5" y="1963" width="100" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="182" value="&lt;span style=&quot;color: rgb(78, 201, 176); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace;&quot;&gt;QuicTransportProtocol&lt;/span&gt;&lt;span style=&quot;&quot;&gt;#&lt;/span&gt;&lt;span style=&quot;color: rgb(220, 220, 170); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace;&quot;&gt;quic_event_received() &amp;lt;- quic_transport_server.pyでoverrideしてる&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2159.5" y="1983" width="630" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="183" value="&lt;span&gt;StreamDataReceivedイベントなので、Client indicationの処理をしてそのorigin/pathによって処理をルーティングさせる。&lt;/span&gt;&lt;span style=&quot;color: rgba(0 , 0 , 0 , 0) ; font-family: monospace ; font-size: 0px&quot;&gt;%3CmxGraphModel%3E%3Croot%3E%3CmxCell%20id%3D%220%22%2F%3E%3CmxCell%20id%3D%221%22%20parent%3D%220%22%2F%3E%3CmxCell%20id%3D%222%22%20value%3D%22%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%20rgb(78%20%2C%20201%20%2C%20176)%20%3B%20font-family%3A%20%26amp%3B%2334%3Bmenlo%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bmonaco%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bcourier%20new%26amp%3B%2334%3B%20%2C%20monospace%20%3B%20background-color%3A%20rgb(30%20%2C%2030%20%2C%2030)%26quot%3B%26gt%3BQuicTransportProtocol%3A%3A%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bfont-family%3A%20%26amp%3B%2334%3Bmenlo%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bmonaco%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bcourier%20new%26amp%3B%2334%3B%20%2C%20monospace%20%3B%20color%3A%20rgb(220%20%2C%20220%20%2C%20170)%26quot%3B%26gt%3Bprocess_client_indication%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%20rgb(212%20%2C%20212%20%2C%20212)%20%3B%20font-family%3A%20%26amp%3B%2334%3Bmenlo%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bmonaco%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bcourier%20new%26amp%3B%2334%3B%20%2C%20monospace%26quot%3B%26gt%3B(%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bfont-family%3A%20%26amp%3B%2334%3Bmenlo%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bmonaco%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bcourier%20new%26amp%3B%2334%3B%20%2C%20monospace%20%3B%20color%3A%20rgb(156%20%2C%20220%20%2C%20254)%26quot%3B%26gt%3Bself%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%20rgb(212%20%2C%20212%20%2C%20212)%20%3B%20font-family%3A%20%26amp%3B%2334%3Bmenlo%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bmonaco%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bcourier%20new%26amp%3B%2334%3B%20%2C%20monospace%26quot%3B%26gt%3B)%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%20rgb(78%20%2C%20201%20%2C%20176)%20%3B%20font-family%3A%20%26amp%3B%2334%3Bmenlo%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bmonaco%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bcourier%20new%26amp%3B%2334%3B%20%2C%20monospace%20%3B%20background-color%3A%20rgb(30%20%2C%2030%20%2C%2030)%26quot%3B%26gt%3B%26lt%3Bbr%26gt%3B%26lt%3B%2Fspan%26gt%3B%22%20style%3D%22text%3Bhtml%3D1%3Balign%3Dcenter%3BverticalAlign%3Dmiddle%3Bresizable%3D0%3Bpoints%3D%5B%5D%3Bautosize%3D1%3B%22%20vertex%3D%221%22%20parent%3D%221%22%3E%3CmxGeometry%20x%3D%221124%22%20y%3D%223490%22%20width%3D%22410%22%20height%3D%2220%22%20as%3D%22geometry%22%2F%3E%3C%2FmxCell%3E%3C%2Froot%3E%3C%2FmxGraphModel%3E&lt;/span&gt;&lt;span style=&quot;color: rgba(0 , 0 , 0 , 0) ; font-family: monospace ; font-size: 0px&quot;&gt;%3CmxGraphModel%3E%3Croot%3E%3CmxCell%20id%3D%220%22%2F%3E%3CmxCell%20id%3D%221%22%20parent%3D%220%22%2F%3E%3CmxCell%20id%3D%222%22%20value%3D%22%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%20rgb(78%20%2C%20201%20%2C%20176)%20%3B%20font-family%3A%20%26amp%3B%2334%3Bmenlo%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bmonaco%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bcourier%20new%26amp%3B%2334%3B%20%2C%20monospace%20%3B%20background-color%3A%20rgb(30%20%2C%2030%20%2C%2030)%26quot%3B%26gt%3BQuicTransportProtocol%3A%3A%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bfont-family%3A%20%26amp%3B%2334%3Bmenlo%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bmonaco%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bcourier%20new%26amp%3B%2334%3B%20%2C%20monospace%20%3B%20color%3A%20rgb(220%20%2C%20220%20%2C%20170)%26quot%3B%26gt%3Bprocess_client_indication%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%20rgb(212%20%2C%20212%20%2C%20212)%20%3B%20font-family%3A%20%26amp%3B%2334%3Bmenlo%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bmonaco%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bcourier%20new%26amp%3B%2334%3B%20%2C%20monospace%26quot%3B%26gt%3B(%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bfont-family%3A%20%26amp%3B%2334%3Bmenlo%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bmonaco%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bcourier%20new%26amp%3B%2334%3B%20%2C%20monospace%20%3B%20color%3A%20rgb(156%20%2C%20220%20%2C%20254)%26quot%3B%26gt%3Bself%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%20rgb(212%20%2C%20212%20%2C%20212)%20%3B%20font-family%3A%20%26amp%3B%2334%3Bmenlo%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bmonaco%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bcourier%20new%26amp%3B%2334%3B%20%2C%20monospace%26quot%3B%26gt%3B)%26lt%3B%2Fspan%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bcolor%3A%20rgb(78%20%2C%20201%20%2C%20176)%20%3B%20font-family%3A%20%26amp%3B%2334%3Bmenlo%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bmonaco%26amp%3B%2334%3B%20%2C%20%26amp%3B%2334%3Bcourier%20new%26amp%3B%2334%3B%20%2C%20monospace%20%3B%20background-color%3A%20rgb(30%20%2C%2030%20%2C%2030)%26quot%3B%26gt%3B%26lt%3Bbr%26gt%3B%26lt%3B%2Fspan%26gt%3B%22%20style%3D%22text%3Bhtml%3D1%3Balign%3Dcenter%3BverticalAlign%3Dmiddle%3Bresizable%3D0%3Bpoints%3D%5B%5D%3Bautosize%3D1%3B%22%20vertex%3D%221%22%20parent%3D%221%22%3E%3CmxGeometry%20x%3D%221124%22%20y%3D%223490%22%20width%3D%22410%22%20height%3D%2220%22%20as%3D%22geometry%22%2F%3E%3C%2FmxCell%3E%3C%2Froot%3E%3C%2FmxGraphModel%3Eその&lt;/span&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;div style=&quot;font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 18px&quot;&gt;=&amp;gt;&lt;span style=&quot;color: rgb(86 , 156 , 214)&quot;&gt; self&lt;/span&gt;&lt;font color=&quot;#d4d4d4&quot;&gt;.handler に 宣言したhandlerをアタッチする&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;labelBackgroundColor=none;labelBorderColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2178" y="2000" width="670" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="185" value="&lt;div style=&quot;color: rgb(212, 212, 212); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; line-height: 18px;&quot;&gt;&lt;span style=&quot;color: #569cd6&quot;&gt;self&lt;/span&gt;.handler = sendDataHandler(&lt;span style=&quot;color: #569cd6&quot;&gt;self&lt;/span&gt;, &lt;span style=&quot;color: #569cd6&quot;&gt;self&lt;/span&gt;._quic)&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2282" y="2080" width="360" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="187" value="&lt;div style=&quot;color: rgb(212 , 212 , 212) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 18px&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #c586c0&quot;&gt;for&lt;/span&gt; e &lt;span style=&quot;color: #569cd6&quot;&gt;in&lt;/span&gt; &lt;span style=&quot;color: #569cd6&quot;&gt;self&lt;/span&gt;.pending_events:&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #569cd6&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;self&lt;/span&gt;.handler.quic_event_received(e)&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2203.5" y="2095" width="300" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="188" value="&lt;font face=&quot;arial, sans-serif&quot;&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;StreamDataReceived&lt;br&gt;&lt;/span&gt;&lt;/font&gt;" style="shape=partialRectangle;whiteSpace=wrap;html=1;bottom=1;right=1;left=1;top=0;fillColor=#D5E8D4;routingCenterX=-0.5;labelBackgroundColor=none;strokeWidth=1;fontFamily=Helvetica;fontSize=40;fontColor=#FF6666;align=left;rotation=90;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="832.96" y="2057.05" width="487.46" height="99.44" as="geometry"/>
                </mxCell>
                <mxCell id="189" value="&lt;div style=&quot;color: rgb(212 , 212 , 212) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 18px&quot;&gt;&lt;span style=&quot;color: #4ec9b0&quot;&gt;sendDataHandler#&lt;/span&gt;&lt;span style=&quot;color: rgb(220 , 220 , 170)&quot;&gt;quic_event_received()&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2282" y="2135" width="280" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="190" value="決めた通りに動く。sampleではオウム返しするようになっている" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="2320" y="2155" width="370" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="192" value="&lt;font face=&quot;arial, sans-serif&quot;&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;ConnectionIdIssued&lt;br&gt;&lt;/span&gt;&lt;/font&gt;" style="shape=partialRectangle;whiteSpace=wrap;html=1;bottom=1;right=1;left=1;top=0;fillColor=#D5E8D4;routingCenterX=-0.5;labelBackgroundColor=none;strokeWidth=1;fontFamily=Helvetica;fontSize=40;fontColor=#FF6666;align=left;rotation=90;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="837.56" y="2568.71" width="478.29" height="99.44" as="geometry"/>
                </mxCell>
                <mxCell id="193" value="&lt;span style=&quot;color: rgb(78, 201, 176);&quot;&gt;QuicServer&lt;/span&gt;&lt;span style=&quot;color: rgb(212, 212, 212);&quot;&gt;#&lt;/span&gt;&lt;font style=&quot;color: rgb(220, 220, 170);&quot;&gt;datagram_received()&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="1840" y="2420" width="190" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="194" value="&lt;span style=&quot;color: rgb(255 , 255 , 255) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 12px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(42 , 42 , 42) ; float: none ; display: inline&quot;&gt;quic_transport_server#&lt;/span&gt;&lt;span style=&quot;font-size: 12px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; color: rgb(78 , 201 , 176) ; background-color: rgb(30 , 30 , 30) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;QuicTransportProtocol#&lt;/span&gt;&lt;span style=&quot;font-size: 12px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; color: rgb(220 , 220 , 170) ; background-color: rgb(30 , 30 , 30) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;datagram_received()&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="1882" y="2442" width="430" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="195" value="quic_transport_server#&lt;span style=&quot;color: rgb(78 , 201 , 176) ; background-color: rgb(30 , 30 , 30) ; font-family: &amp;quot;menlo&amp;quot; , &amp;quot;monaco&amp;quot; , &amp;quot;courier new&amp;quot; , monospace&quot;&gt;QuicTransportProtocol#&lt;/span&gt;&lt;span style=&quot;color: rgb(220 , 220 , 170) ; background-color: rgb(30 , 30 , 30) ; font-family: &amp;quot;menlo&amp;quot; , &amp;quot;monaco&amp;quot; , &amp;quot;courier new&amp;quot; , monospace&quot;&gt;quic_event_received&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="1922" y="2461" width="430" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="196" value="&lt;span style=&quot;color: rgb(78 , 201 , 176) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;QuicConnection#&lt;/span&gt;&lt;span style=&quot;color: rgb(220 , 220 , 170) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;receive_datagram()&lt;/span&gt;&lt;span style=&quot;color: rgb(220 , 220 , 170) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;&lt;br&gt;&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontColor=#F0F0F0;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="1962" y="2481" width="250" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="197" value="&lt;div style=&quot;font-family: &amp;quot;menlo&amp;quot; , &amp;quot;monaco&amp;quot; , &amp;quot;courier new&amp;quot; , monospace ; line-height: 18px&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;color: rgb(78, 201, 176); background-color: rgb(30, 30, 30); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace;&quot;&gt;QuicConnectionProtocol#&lt;/span&gt;&lt;span style=&quot;color: rgb(220 , 220 , 170) ; background-color: rgb(30 , 30 , 30) ; font-family: &amp;quot;menlo&amp;quot; , &amp;quot;monaco&amp;quot; , &amp;quot;courier new&amp;quot; , monospace&quot;&gt;datagram_received()&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2002" y="2501" width="320" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="198" value="&lt;div style=&quot;font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; color: rgb(212 , 212 , 212)&quot;&gt;&lt;span style=&quot;color: rgb(86 , 156 , 214)&quot;&gt;self&lt;/span&gt;._quic.receive_datagram(cast(&lt;span style=&quot;color: rgb(78 , 201 , 176)&quot;&gt;bytes&lt;/span&gt;, data), addr,&amp;nbsp;&lt;span style=&quot;color: rgb(156 , 220 , 254)&quot;&gt;now&lt;/span&gt;=&lt;span style=&quot;color: rgb(86 , 156 , 214)&quot;&gt;self&lt;/span&gt;._loop.time())&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
                    <mxGeometry x="2041.5" y="2521" width="560" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="215" value="&lt;div style=&quot;color: rgb(212 , 212 , 212) ; font-family: &amp;quot;menlo&amp;quot; , &amp;quot;monaco&amp;quot; , &amp;quot;courier new&amp;quot; , monospace ; line-height: 18px&quot;&gt;&lt;div style=&quot;font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; line-height: 18px;&quot;&gt;&lt;span style=&quot;color: #4ec9b0&quot;&gt;QuicConnection&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(212 , 212 , 212) ; font-family: &amp;quot;menlo&amp;quot; , &amp;quot;monaco&amp;quot; , &amp;quot;courier new&amp;quot; , monospace ; line-height: 18px&quot;&gt;&lt;span style=&quot;color: #569cd6&quot;&gt;self&lt;/span&gt;._quic.datagrams_to_send()&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2080" y="2203" width="230" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="217" value="&lt;div style=&quot;font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 18px&quot;&gt;&lt;span style=&quot;color: rgb(78 , 201 , 176)&quot;&gt;QuicConnectionProtocol&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 18px&quot;&gt;&lt;font color=&quot;#3399ff&quot;&gt;self&lt;/font&gt;&lt;font color=&quot;#4ec9b0&quot;&gt;.&lt;/font&gt;&lt;font color=&quot;#ffd966&quot;&gt;transmit()&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2039.5" y="2163" width="170" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="219" value="&lt;div style=&quot;color: rgb(212, 212, 212); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; line-height: 18px;&quot;&gt;&lt;span style=&quot;color: #569cd6&quot;&gt;self&lt;/span&gt;._write_application&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#000000;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2119.5" y="2243" width="180" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="220" value="&lt;div style=&quot;color: rgb(212, 212, 212); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; line-height: 18px;&quot;&gt;&lt;span style=&quot;color: rgb(86 , 156 , 214) ; font-family: &amp;quot;menlo&amp;quot; , &amp;quot;monaco&amp;quot; , &amp;quot;courier new&amp;quot; , monospace&quot;&gt;self.&lt;/span&gt;_write_new_connection_id_frame&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#000000;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2158" y="2310" width="270" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="221" value="&lt;div style=&quot;color: rgb(212, 212, 212); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; line-height: 18px;&quot;&gt;&lt;span style=&quot;color: #569cd6&quot;&gt;self&lt;/span&gt;._events.append(events.ConnectionIdIssued(&lt;span style=&quot;color: #9cdcfe&quot;&gt;connection_id&lt;/span&gt;=connection_id.cid))&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#000000;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2204" y="2330" width="590" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="222" value="ここで&lt;span style=&quot;color: rgb(78 , 201 , 176) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;QuicConnection.&lt;/span&gt;_eventsにConnectionIdIssuedが格納される" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="2244" y="2350" width="390" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="223" value="HandShakeCompletedイベントが発火するまでの処理の中で作っておいたhost_cidsに入っているconnection_idを準備する。&lt;br&gt;デフォルトでは上限が2になっているので、_write_new_connection_id_frameが1回呼ばれる。(もし8に設定されていたら7回呼ばれてConnectionIdIssuedが7回起きるはず)&lt;br&gt;connection_idの.was_sentがFalseの場合は新しいconnectionIdなので、ConnectionIdIssuedイベントを発生させる" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="2139" y="2263" width="930" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="224" value="&lt;div style=&quot;color: rgb(212 , 212 , 212) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 18px&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #569cd6&quot;&gt;self&lt;/span&gt;._process_events()&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2041" y="2602" width="170" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="225" value="ここは宣言したhandlerによって上書きされている" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="2062" y="2542" width="280" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="230" value="&lt;div style=&quot;color: rgb(212 , 212 , 212) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 18px&quot;&gt;&lt;span style=&quot;color: #4ec9b0&quot;&gt;sendDataHandler#&lt;/span&gt;&lt;span style=&quot;color: rgb(220 , 220 , 170)&quot;&gt;quic_event_received()&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2081" y="2562" width="280" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="231" value="sampleでは、ConnectionIdIssuedは特に処理はしない" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="2101.5" y="2582" width="300" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="232" value="&lt;div style=&quot;font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 18px&quot;&gt;&lt;font color=&quot;#3399ff&quot;&gt;self&lt;/font&gt;&lt;span style=&quot;color: rgb(212 , 212 , 212)&quot;&gt;._connection_id_issued_handler&lt;/span&gt;&lt;span style=&quot;background-color: rgb(30 , 30 , 30) ; color: rgb(212 , 212 , 212) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace&quot;&gt;(event.connection_id)&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2081" y="2624" width="410" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="233" value="&lt;div style=&quot;color: rgb(212 , 212 , 212) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; line-height: 18px&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(86 , 156 , 214)&quot;&gt;self&lt;/span&gt;&lt;span&gt;.transmit()&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2042" y="2814" width="120" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="234" value="QuicConnectionProtocolの&lt;br&gt;&lt;div style=&quot;color: rgb(212 , 212 , 212) ; line-height: 18px&quot;&gt;_connection_id_issued_handler&lt;/div&gt;&lt;div style=&quot;color: rgb(212 , 212 , 212) ; line-height: 18px&quot;&gt;&lt;div style=&quot;line-height: 18px&quot;&gt;_connection_id_retired_handler&lt;/div&gt;&lt;div style=&quot;line-height: 18px&quot;&gt;callback関数なので、上書きしてあげると&lt;/div&gt;&lt;div style=&quot;line-height: 18px&quot;&gt;ConnectionIdIssuedやConnectionIdRetiredイベント&lt;/div&gt;&lt;div style=&quot;line-height: 18px&quot;&gt;が発火した時にいろいろなことができる。&lt;/div&gt;&lt;div style=&quot;line-height: 18px&quot;&gt;(L136)server.pyがQuicConnectionProtocolのこのコールバック関数をみてregister callbacksをしている&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontColor=#FFFFFF;labelBackgroundColor=none;fontFamily=Helvetica;" parent="1" vertex="1">
                    <mxGeometry x="2101.5" y="2644" width="560" height="130" as="geometry"/>
                </mxCell>
                <mxCell id="236" value="&lt;div style=&quot;color: rgb(212, 212, 212); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; line-height: 18px;&quot;&gt;&lt;span style=&quot;color: #569cd6&quot;&gt;self&lt;/span&gt;._connection_id_issued_handler: QuicConnectionIdHandler = &lt;span style=&quot;color: #569cd6&quot;&gt;lambda&lt;/span&gt; &lt;span style=&quot;color: #9cdcfe&quot;&gt;c&lt;/span&gt;: &lt;span style=&quot;color: #569cd6&quot;&gt;None&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; line-height: 18px;&quot;&gt;で初期化されているので何もしない&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2120" y="2774" width="560" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="237" value="sampleでは何もしないが、ConnectionIdIssuedイベントに時に行われる&lt;br&gt;&lt;div style=&quot;color: rgb(212, 212, 212); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; line-height: 18px;&quot;&gt;_connection_id_issued_handler&lt;/div&gt;&lt;div style=&quot;color: rgb(212, 212, 212); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; line-height: 18px;&quot;&gt;が、コールバック関数なので上書きしてあげるといろいろな処理ができる&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=12;fontFamily=Helvetica;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="1129" y="2610" width="410" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="238" value="ここから定期的にpingを飛ばす。&lt;br style=&quot;font-size: 20px;&quot;&gt;QuicConnectionではframe_type:1として扱われる。&lt;br style=&quot;font-size: 20px;&quot;&gt;pingを定期的に送るだけなので特に何もしない" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=20;fontFamily=Helvetica;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="223" y="2230" width="470" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="239" value="&lt;span style=&quot;color: rgb(209 , 210 , 211) ; font-size: 15px&quot;&gt;ここでConnectionIdIssuedが呼ばれる理由がわからなかったが、答えはQuicが上限まで&lt;br&gt;ConnectionIdを宣言しておくためだった。&lt;br&gt;QuicConnectionの仕様で、最初のネゴる時にConnection idを&lt;br&gt;あらかじめ上限まで作っておくようになっている。&lt;br&gt;それがClientIndicationの処理の最後にfor文でConnectionIdIssuedがQuicConnection#_events&lt;br&gt;に入れられるようになっている。デフォは2なので1回追加でイベントが起きる&lt;br&gt;(デフォは2。最大8。その間は選べる)&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=20;fontFamily=Helvetica;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="1139" y="2381" width="630" height="180" as="geometry"/>
                </mxCell>
                <mxCell id="240" value="&lt;div style=&quot;color: rgb(212 , 212 , 212) ; font-family: &amp;#34;menlo&amp;#34; , &amp;#34;monaco&amp;#34; , &amp;#34;courier new&amp;#34; , monospace ; font-size: 12px ; line-height: 18px&quot;&gt;&lt;span style=&quot;color: #569cd6&quot;&gt;self&lt;/span&gt;._replenish_connection_ids()　&amp;lt;- 開ける上限までconnection idを作成する。&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=20;fontFamily=Helvetica;fontColor=#FFFFFF;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="2243" y="1618" width="530" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="243" value="pingも、基本的には最初に作ったconnectionを使うため、&lt;br&gt;デフォでConnectionIdIssuedは2回起きるが、特に使われない。" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=20;fontFamily=Helvetica;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="220" y="2481" width="580" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="244" value="bufferの中に二つとも入ってたので多分同時に送ってる" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=20;fontFamily=Helvetica;fontColor=#FFFFFF;" parent="1" vertex="1">
                    <mxGeometry x="230.02" y="1240" width="510" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="246" value="&lt;meta charset=&quot;utf-8&quot; style=&quot;font-size: 11px;&quot;&gt;&lt;span style=&quot;font-size: 11px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; color: rgb(78, 201, 176); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace;&quot;&gt;QuicTransportProtocol::&lt;/span&gt;&lt;span style=&quot;font-size: 11px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; color: rgb(220, 220, 170);&quot;&gt;process_client_indication&lt;/span&gt;&lt;span style=&quot;font-size: 11px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; color: rgb(212, 212, 212); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;font-size: 11px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; color: rgb(156, 220, 254);&quot;&gt;self&lt;/span&gt;&lt;span style=&quot;font-size: 11px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; color: rgb(212, 212, 212); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace;&quot;&gt;)&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;labelBackgroundColor=none;fontSize=11;" vertex="1" parent="1">
                    <mxGeometry x="2199.5" y="2040" width="370" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="247" value="&lt;div style=&quot;color: rgb(212, 212, 212); font-family: menlo, monaco, &amp;quot;courier new&amp;quot;, monospace; line-height: 18px;&quot;&gt;&lt;span style=&quot;color: #dcdcaa&quot;&gt;self.parse_client_indication()&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;labelBackgroundColor=none;" vertex="1" parent="1">
                    <mxGeometry x="2233" y="2060" width="230" height="20" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>